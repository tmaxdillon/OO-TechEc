function [] = optSave(prepath,name,batchtype,batchpm,batchscen, ...
    batchloc,batchc)

%clearvars -except name prepath batchtype scen loc c

%unpack ARRAY TASK ID into batchloc
loc_id 
if isequal(batchtype,'ssm') %ssm
    switch batchloc
        case
optScript

if isequal(batchtype,'ssm') %ssm
    if pm == 1
        save([prepath name '.mat'], ...
            'tiv','tcm','twf','cis','rsp','cos','tef','szo', ...
            'lft','dtc','osv','spv','tmt','eol','dep','bcc', ...
            'bhc','utp','ild','sdr','s0')
    elseif s1(1).pm == 3 %wave
        save([prepath name '.mat'],'wiv','wcm','whl','ild','osv', ...
            'sdr','utp','bhc','dep','dtc','lft','spv', ...
            'tmt','bcc','bbt','eol','s0','-v7.3')
    end
else %save single structure
    if exist('multStruct','var')
        stru.(name) = multStruct;
    elseif exist('allLocUses','var')
        stru.(name) = allLocUses;
    elseif exist('allScenUses','var')
        stru.(name) = allScenUses;
    else
        stru.(name) = optStruct;
    end
    save([prepath name '.mat'], '-struct','stru','-v7.3')
end

end

